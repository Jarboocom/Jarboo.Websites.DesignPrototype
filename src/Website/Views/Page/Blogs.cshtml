@using Website.Models.ExtensionMethods
@model List<Services.Domain.Pages.JarbooPage>
@{
    Layout = "_SideBarLayout.cshtml";
    ViewBag.Title = "Blog";
    var page = (int)ViewBag.Page;
    int? totalPages = null;
    var artcile = Model.FirstOrDefault();
    if (artcile != null)
    {
        totalPages = artcile.Pages;
    }
}

<div class="row content-row">
    <div class="content-wrapper">
        @foreach (var post in Model)
        {
            <div class="col-md-12 col-sm-12 col-xs-12 section1-text blog-list">
                <h3>
                    @Html.ActionLink(post.Title, "Blog", new {controller = "Page", slug = post.Slug})
                    <br/>
                    <span>Published on @post.DateCreated.DisplayAsDate()</span>
                </h3>
                <p class="excerpt">
                    @Html.Raw(post.Content.FirstSentence())... <a href="@Url.Action("Blog", new { controller = "Page", slug = post.Slug })">Read more</a>
                </p>
            </div>
        }

        <div>
            @if (totalPages != null && totalPages > 1)
            {
                for (int i = 1; i <= totalPages; i++)
                {
                    
                    if (page == i)
                    {
                        <span>@i</span>
                    }

                    if (page != i)
                    {
                        <a href="@Url.Action("Blogs", new {controller = "Page", page = i})" class="btn btn-primary">@i</a>
                    }
                }
            }
        </div>
    </div>
</div>
